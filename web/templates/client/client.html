{{ define "content" }}
<h2>–°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>–ò–º—è</th>
            <th>–§–∞–º–∏–ª–∏—è</th>
            <th>–û—Ç—á–µ—Å—Ç–≤–æ</th>
            <th>–ê–¥—Ä–µ—Å</th>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
            <th>–ü–∞—Å–ø–æ—Ä—Ç</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {{ range .Clients }}
        <tr>
            <td>{{ .Firstname }}</td>
            <td>{{ .Lastname }}</td>
            <td>{{ .Middlename }}</td>
            <td>{{ .Address }}</td>
            <td>{{ .Phonenumber }}</td>
            <td>{{ .Dateofbirth.Format "2006-01-02" }}</td>
            <td>{{ .Passport }}</td>
            <td>
                <a href="/client/edit/{{ .ID }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <button onclick="deleteClient('{{ .ID }}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </td>
        </tr>
        {{ end }}
    </tbody>
</table>

<br>
<a href="/client/new">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</a>

<script>
async function deleteClient(id) {
    if (!confirm("–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞?")) return;

    try {
        const res = await fetch(`/client/${id}`, {
            method: "DELETE",
            headers: { "Content-Type": "application/json" }
        });

        if (res.ok) {
            alert("–ö–ª–∏–µ–Ω—Ç —É–¥–∞–ª–µ–Ω");
            location.reload();
        } else {
            const data = await res.json();
            alert(data.error || "–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏");
        }
    } catch (err) {
        alert("–û—à–∏–±–∫–∞: " + err.message);
    }
}
</script>
{{ end }}
{{ template "base.html" }}
