{{ define "content" }}
<h2>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤</h2>

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–û–±—Ä–∞—â–∞—Ç—å—Å—è –ö</th>
            <th>–ê–¥—Ä–µ—Å</th>
            <th>Email</th>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {{ range .Providers }}
        <tr>
            <td>{{ .Name }}</td>
            <td>{{ .Addressto }}</td>
            <td>{{ .Address }}</td>
            <td>{{ .Email }}</td>
            <td>{{ .PhoneNumber }}</td>
            <td>
                <a href="/provider/edit/{{ .ID }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <button onclick="deleteProvider('{{ .ID }}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </td>
        </tr>
        {{ end }}
    </tbody>
</table>

<br>
<a href="/provider/new">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞</a>

<script>
async function deleteProvider(id) {
    if (!confirm("–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞?")) return;

    const res = await fetch(`/provider/delete/${id}`, { method: "DELETE" });

    if (res.ok) {
        alert("–£–¥–∞–ª–µ–Ω–æ");
        location.reload();
    } else {
        const data = await res.json();
        alert(data.error || "–û—à–∏–±–∫–∞");
    }
}
</script>
{{ end }}
{{ template "base.html" }}
