{{ define "content" }}
<h2>–°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥</h2>

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {{ range .Services }}
        <tr>
            <td>{{ .Name }}</td>
            <td>{{ .Price }}</td>
            <td>
                <a href="/service/edit/{{ .ID }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <button onclick="deleteService('{{ .ID }}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </td>
        </tr>
        {{ end }}
    </tbody>
</table>

<br>
<a href="/service/new">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</a>

<script>
async function deleteService(id) {
    if (!confirm("–£–¥–∞–ª–∏—Ç—å —É—Å–ª—É–≥—É?")) return;

    const res = await fetch(`/service/delete/${id}`, { method: "POST" });

    if (res.ok) {
        alert("–£–¥–∞–ª–µ–Ω–æ");
        location.reload();
    } else {
        const data = await res.json();
        alert(data.error || "–û—à–∏–±–∫–∞");
    }
}
</script>
{{ end }}
{{ template "base.html" }}
