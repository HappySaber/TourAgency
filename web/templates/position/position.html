{{ define "content" }}
<h2>–°–ø–∏—Å–æ–∫ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π</h2>

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ó–∞—Ä–ø–ª–∞—Ç–∞ –ö</th>
            <th>–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏</th>
        </tr>
    </thead>
    <tbody>
        {{ range .Positions }}
        <tr>
            <td>{{ .Name }}</td>
            <td>{{ .Salary }}</td>
            <td>{{ .Responsibilities }}</td>
            <td>
                <a href="/position/edit/{{ .ID }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <button onclick="deletePosition('{{ .ID }}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </td>
        </tr>
        {{ end }}
    </tbody>
</table>

<br>
<a href="/position/new">‚ûï –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ª–∂–Ω–æ—Å—Ç—å</a>

<script>
async function deletePosition(id) {
    if (!confirm("–£–¥–∞–ª–∏—Ç—å –¥–æ–ª–∂–Ω–æ—Å—Ç—å?")) return;

    const res = await fetch(`/position/${id}`, { method: "DELETE" });

    if (res.ok) {
        alert("–£–¥–∞–ª–µ–Ω–æ");
        location.reload();
    } else {
        const data = await res.json();
        alert(data.error || "–û—à–∏–±–∫–∞");
    }
}
</script>
{{ end }}
{{ template "base.html" }}
